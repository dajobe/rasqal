#!/bin/sh
# Test 7: XML output format
# This test verifies that XML output includes expected and actual fields

set -e

# Source the test environment
. "${srcdir:-.}/test-common.sh"

# Test description
echo "1..1"
echo "# Test 7: XML output format"

# Run the comparison with XML output
output="$("$RASQAL_COMPARE" -R xml -x -e "$srcdir/null-both.xml" -a "$srcdir/null-vs-value.xml" 2>&1)" || true

# Check for expected XML fields
if echo "$output" | grep -F -q "<expected>o='NULL'</expected>" && \
   echo "$output" | grep -E -q "<actual>o='(non-NULL|[^']+)'</actual>"; then
  echo "ok 7 - XML output correctly includes expected and actual fields"
else
  echo "not ok 7 - XML output missing expected or actual fields"
  echo "# Output: $output"
  exit 1
fi
